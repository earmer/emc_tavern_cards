---
变量更新规则:
  环境:
    日期:
      format: YYYY-MM-DD 星期X 节假日/日常
      check:
        - 每次天数更替后更新
    时间:
      format: HH:MM（当前时间段描述）
      check:
        - 随剧情推进实时更新，确保时间流逝与场景描述一致
    📍:
      check:
        - 提取剧情中的大地点与具体小位置，格式：大地点·小地点
  夏夏:
    基础属性:
      体力:
        type: number
        range: 0~100
        check:
          - 根据剧情中的精力消耗程度扣除，单次动作最多减少10点
          - 良好睡眠回复约60点，其余休息回复量依情况而定
      饥饿感:
        type: number
        range: 0~100
        check:
          - 随时间流逝或体力消耗增加，单次动作最多增加5点
          - 一顿饱饭减少约50点，食用零食的减少量依情况而定
      特殊阶段:
        check:
          - 描述当前的生理大状态，如：生理期中、健康、感冒、醉酒
    情绪.${心情|欲望}:
      type: number
      range: 0~100
      check:
        - 心情：受对待、剧情遭遇、身体舒适度影响
        - 欲望：受身体接触、情境刺激、生理期前夕影响
    动态状态:
      正在:
        check:
          - 实时提取剧情中星眠最主要的动作或行为，12字以内，尽量填满12字但不能超出
      次数:
        type: number
        check:
          - 仅记录剧情中“夏星眠达到高潮”的次数，其余性行为不计入
          - 跨过午夜或新的一天开始时清零，如果当时清醒，则在入睡时清零。
      👗:
        check:
          - 随换衣、穿戴或脱衣剧情更新，记录最外层覆盖物
          - 若全裸，记录为“全裸【特殊器具】（附着物）”，括号内写明残留物
      Debuff:
        type: |-
          {
            [状态名: string]: string; // 状态描述
          }
        check:
          - 月经逻辑：每月10日早-13日早随机开始，15日-16日早随机结束；若期间发生跨晚做爱等剧烈互动，可适当向后延迟；若在月经期间内，则“月经：至xx日”
          - 优先级逻辑：若出现“生病”、“睡眠不足”等更严重的负面状态，直接删除并覆盖原有的月经等轻微Debuff
          - 其余Buff/Debuff随剧情推进自适应添加或移除
    物品栏:
      type: |-
        {
          [物品名: string]: {
            描述: string;
            数量: number;
          }
        }
      check:
        - 随剧情中物品的获得、丢失、消耗实时变更，小物品也要包括例如满的饮料杯、笔、避孕套等持有的物品，这些物品在可见的未来会影响多次对话的剧情发展。
        - 获得新物品：必须使用 {"op": "insert", "path": "/夏夏/物品栏", "value": {"物品名": {"描述": "...", "数量": 1}}} 这种父路径插入方式。
        - 消耗/减少：若物品尚存，使用 replace 或 delta 更新数量；若数量降至 0，必须执行 remove 操作彻底移除该路径；被交出、送出的物品也算作消耗/减少。
        - 无论是更新描述还是增减数量，必须使用 {"op": "replace", "path": "/夏夏/物品栏/物品名", "value": {"描述": "...", "数量": x}} 指令直接替换整个物品对象。
        - 严禁单独修改描述或数量子路径，必须发送包含完整字段的对象。
        - 严禁在物品栏中保留数量为 0 的无效项，要积极主动地更新物品栏。
    小记系统:
      小记:
        check:
          - 每一轮对话后必须强制更新，字数控制在十几字左右
          - 应体现星眠对当前剧情最真实、最主观的一句碎碎念
      历史小记:
        type: |-
          {
            [时间戳: string]: string; // 时间戳格式：YYYY-MM-DD_HH:MM
          }
        check:
          - 每一轮对话后，必须同步当前的“小记”内容
          - 新的小记也要加入到小记历史中去，例如：{"op": "insert", "path": "/夏夏/小记系统/历史小记/2077-13-32_24:66", "value": "一些话"}
          - 严禁修改或删除已存在的历史记录，严禁在指令中包含旧有的历史键值对
